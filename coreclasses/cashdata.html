<!DOCTYPE html> 
<html> 
<head> 
<title>Docs / CASH Music</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 

<link href="../assets/css/docs.css" rel="stylesheet" type="text/css" /> 

<script type="text/javascript">
/* Modernizr 2.0.6 (Custom Build) | MIT & BSD
 * Build: http://www.modernizr.com/download/#-fontface-cssclasses-teststyles
 */
;window.Modernizr=function(a,b,c){function y(a,b){return!!~(""+a).indexOf(b)}function x(a,b){return typeof a===b}function w(a,b){return v(prefixes.join(a+";")+(b||""))}function v(a){k.cssText=a}var d="2.0.6",e={},f=!0,g=b.documentElement,h=b.head||b.getElementsByTagName("head")[0],i="modernizr",j=b.createElement(i),k=j.style,l,m=Object.prototype.toString,n={},o={},p={},q=[],r=function(a,c,d,e){var f,h,j,k=b.createElement("div");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:i+(d+1),k.appendChild(j);f=["&shy;","<style>",a,"</style>"].join(""),k.id=i,k.innerHTML+=f,g.appendChild(k),h=c(k,a),k.parentNode.removeChild(k);return!!h},s,t={}.hasOwnProperty,u;!x(t,c)&&!x(t.call,c)?u=function(a,b){return t.call(a,b)}:u=function(a,b){return b in a&&x(a.constructor.prototype[b],c)};var z=function(a,c){var d=a.join(""),f=c.length;r(d,function(a,c){var d=b.styleSheets[b.styleSheets.length-1],g=d.cssRules&&d.cssRules[0]?d.cssRules[0].cssText:d.cssText||"",h=a.childNodes,i={};while(f--)i[h[f].id]=h[f];e.fontface=/src/i.test(g)&&g.indexOf(c.split(" ")[0])===0},f,c)}(['@font-face {font-family:"font";src:url("https://")}'],["fontface"]);n.fontface=function(){return e.fontface};for(var A in n)u(n,A)&&(s=A.toLowerCase(),e[s]=n[A](),q.push((e[s]?"":"no-")+s));v(""),j=l=null,e._version=d,e.testStyles=r,g.className=g.className.replace(/\bno-js\b/,"")+(f?" js "+q.join(" "):"");return e}(this,this.document);

var colors = ['cd074d','ca8c07','97b800','0080c9','8a00ca'];
var pagecolor = colors[Math.floor(Math.random() * colors.length)];
document.write('<style type="text/css">a {color:#' + pagecolor + ';}#topspc {background-color:#' + pagecolor + ';}</style>');
</script>

<link rel="icon" type="image/png" href="https://cashmusic.org/assets/images/icons/cash.png" /> 

</head> 

<body> 
<div id="topspc">
	<div id="navspc">
		<a href="/">Home</a> <a href="../">Docs</a>
	</div>
</div>
<div id="wrap"> 
	<div id="mainspc">
<div id="pagemenu"><h3>Getting Started</h3><ul class="nobullets"><li><a href="../gettingstarted/overview.html" class="usecolor1">Overview</a></li><li><a href="../gettingstarted/quickstart.html" class="usecolor1">Quick Start</a></li><li><a href="../gettingstarted/styleguidecode.html" class="usecolor1">Style Guide (code)</a></li></ul><h3>Bootstrap Script</h3><ul class="nobullets"><li><a href="../bootstrapscript/cashmusic.html" class="usecolor2">cashmusic.php</a></li></ul><h3>Core Classes</h3><ul class="nobullets"><li><a href="../coreclasses/cashdata.html" class="usecolor3">CASHData</a></li><li><a href="../coreclasses/cashdba.html" class="usecolor3">CASHDBA</a></li><li><a href="../coreclasses/cashrequest.html" class="usecolor3">CASHRequest</a></li><li><a href="../coreclasses/cashresponse.html" class="usecolor3">CASHResponse</a></li><li><a href="../coreclasses/cashsettings.html" class="usecolor3">CASHSettings</a></li><li><a href="../coreclasses/cashsystem.html" class="usecolor3">CASHSystem</a></li><li><a href="../coreclasses/elementbase.html" class="usecolor3">ElementBase</a></li><li><a href="../coreclasses/plantbase.html" class="usecolor3">PlantBase</a></li><li><a href="../coreclasses/seedbase.html" class="usecolor3">SeedBase</a></li></ul><h3>Plant Classes</h3><ul class="nobullets"><li><a href="../plantclasses/commerceplant.html" class="usecolor4">__CommercePlant</a></li><li><a href="../plantclasses/assetplant.html" class="usecolor4">AssetPlant</a></li><li><a href="../plantclasses/calendarplant.html" class="usecolor4">CalendarPlant</a></li><li><a href="../plantclasses/echoplant.html" class="usecolor4">EchoPlant</a></li><li><a href="../plantclasses/elementplant.html" class="usecolor4">ElementPlant</a></li><li><a href="../plantclasses/peopleplant.html" class="usecolor4">PeoplePlant</a></li><li><a href="../plantclasses/systemplant.html" class="usecolor4">SystemPlant</a></li></ul></div><h1 class="classname">CASHData</h1><span class="classdescription"><br />Data access for all Plant and Seed classes. CASHData abstracts out SESSION <br />data handling, provides a CASHDBA object as $this->db, and provides functions <br />to access metadata for all tables. <br /><br /></span><br /><br />@package diy.org.cashmusic<br />@author CASH Music<br />@link http://cashmusic.org/<br /><br />Copyright (c) 2011, CASH Music<br />Licensed under the Affero General Public License version 3.<br />See <a href="http://www.gnu.org/licenses/agpl-3.0.html">http://www.gnu.org/licenses/agpl-3.0.html</a><br /><br /> <h2 class="functionname">connectDB()</h2><div class="commentblock">
Grabs database connection properties from /settings/cashmusic.ini.php and
opens the appropriate connection<br /><br /><span class="return">@return</span> void
 </div><h2 class="functionname">resetSession()</h2><div class="commentblock">
Empties (or creates empty) entries to the standard $_SESSION array<br /><br /><span class="return">@return</span> boolean
 </div><h2 class="functionname">startSession()</h2><div class="commentblock">
Sets the time against which the session is measured. This function also
sets the cash_session_id internally as a mechanism for tracking analytics
against a consistent id, regardless of PHP session id.<br /><br /><span class="return">@return</span> boolean
 </div><h2 class="functionname">getCASHSessionID()</h2><div class="commentblock">
Returns the internal cash_session_id (Not the PHP session id)<br /><br /><span class="return">@return</span> boolean
 </div><h2 class="functionname">sessionSetLastResponse(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$reset_session_id=false<br />)</h2><div class="commentblock">
Replaces $_SESSION['cash_last_response'] with a new response<br /><br /><span class="param">@param</span> {array} $response - the new CASHResponse<br /><span class="param">@param</span> {boolean} $reset_session_id [default: false] - if true a new 
 session id is generated as a security measure <br /><span class="return">@return</span> boolean
 </div><h2 class="functionname">sessionGetLastResponse()</h2><div class="commentblock">
Returns the current value of $_SESSION['cash_last_response']<br /><br /><span class="return">@return</span> array|false
 </div><h2 class="functionname">sessionClearLastResponse()</h2><div class="commentblock">
Sets $_SESSION['cash_last_response'] to false<br /><br /><span class="return">@return</span> array|false
 </div><h2 class="functionname">sessionSetPersistent(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value<br />)</h2><div class="commentblock">
Adds new data to the $_SESSION['cash_persistent_store'] array and resets
the session id as a security precaution. <br /><br /><span class="param">@param</span> {string} $key - the key to associate with the new data<br /><span class="param">@param</span> {*} $value - the data to store<br /><span class="return">@return</span> boolean
 </div><h2 class="functionname">sessionGetPersistent(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key<br />)</h2><div class="commentblock">
Returns data from the $_SESSION['cash_persistent_store'] array<br /><br /><span class="param">@param</span> {string} $key - the key associated with the requested data<br /><span class="return">@return</span>|false
 </div><h2 class="functionname">sessionClearPersistent(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key<br />)</h2><div class="commentblock">
Removes the key/value entry for a specified key<br /><br /><span class="param">@param</span> {string} $key - the key to be removed<br /><span class="return">@return</span> void
 </div><h2 class="functionname">sessionClearAllPersistent()</h2><div class="commentblock">
Removes all data from $_SESSION['cash_persistent_store'], setting it false<br /><br /><span class="return">@return</span> void
 </div><h2 class="functionname">setMetaData(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$scope_table_alias,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$scope_table_id,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$user_id,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data_key,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data_value<br />)</h2><div class="commentblock"><br /><br />METADATA
Metadata can be applied to any table by way of a scope table (alias) and
id. These functions make access available to all plants.<br /><br /> </div><h2 class="functionname">primeCache(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cache_dir=false<br />)</h2><div class="commentblock">
Readies the basic file cache for JSON/feed caching — essentially just tests 
to ensure that the cache directory exists and is writeable. primeCache() will 
set $this->cache_enabled true on success.<br /><br /><span class="return">@return</span> void
 </div><h2 class="functionname">setCacheData(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cache_name, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data_name, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$encode=true<br />)</h2><div class="commentblock">
Sets the contents of a given cache file. Setting $encode will tell it to 
encode the data as JSON or not.<br /><br /><span class="return">@return</span> string or decoded JSON object/array
 </div><h2 class="functionname">getCacheData(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cache_name, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data_name, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$force_last=false, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$decode=true<br />)</h2><div class="commentblock">
Gets the contents of a given cache file. If $force_last is set it will 
ignore expiry state and simply return the data in the file regardless. 
Setting $decode will tell it to parse the data as JSON or not.<br /><br /><span class="return">@return</span> string or decoded JSON object/array
 </div><h2 class="functionname">getCacheExpirationFor(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$datafile, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cache_duration=900<br />)</h2><div class="commentblock">
Tests whether a given set of data has expired based on the passed duration.<br /><br /><span class="return">@return</span> int (remaining time in seconds) or false
 </div><h2 class="functionname">getCachedURL(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cache_name, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data_name, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data_url, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$format='json', <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$decode=true<br />)</h2><div class="commentblock">
Takes a cache name, data name, and URL — first looks for viable cache data, 
then <br /><br /><span class="return">@return</span> int (remaining time in seconds) or false
 </div>
	</div>
</div>

<div id="footer">
	<p><b>&copy; 2011 CASH Music.</b> All our code is open-source. <a href="http://cashmusic.org/why/" style="margin-left:0;">Learn more</a>. <a href="http://help.cashmusic.org/">Get help</a> <a href="http://cashmusic.org/donate" class="donatelink"><b>Donate</b></a></p>
</div>

</body>
</html>